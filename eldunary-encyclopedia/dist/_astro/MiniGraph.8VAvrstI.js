import{_ as d}from"./preload-helper.CLcXU_4U.js";import{j as l}from"./jsx-runtime.TBa3i5EZ.js";import{r as p}from"./index.CVf8TyFT.js";function w({slug:e,nodes:a,edges:c}){const s=p.useRef(null);return p.useEffect(()=>{!s.current||!a.length||d(()=>import("./index.YKLKnyE1.js"),[]).then(r=>{const i=r.select(s.current);i.selectAll("*").remove(),i.attr("width",280).attr("height",220).attr("viewBox","0 0 280 220");const h=r.forceSimulation(a).force("link",r.forceLink(c).id(t=>t.id).distance(60)).force("charge",r.forceManyBody().strength(-80)).force("center",r.forceCenter(280/2,220/2)),g=i.append("g").selectAll("line").data(c).enter().append("line").attr("stroke","rgba(255,255,255,0.1)").attr("stroke-width",1),n=i.append("g").selectAll("g").data(a).enter().append("g").attr("cursor","pointer");n.append("circle").attr("r",t=>t.id===e?9:5).attr("fill",t=>t.accentColor??"#C49B5C").attr("stroke",t=>t.id===e?"#fff":"rgba(255,255,255,0.15)").attr("stroke-width",t=>t.id===e?2:1),n.append("text").text(t=>t.name.length>12?t.name.slice(0,12)+"â€¦":t.name).attr("x",7).attr("y",4).attr("fill","#F5F0E8").attr("font-size","8px").attr("pointer-events","none"),n.on("click",(t,o)=>{if(o.id===e)return;const f={race:"races",kingdom:"kingdoms",city:"cities",character:"characters",arashi:"arashi",organization:"organizations",family:"families",history:"history",magic:"magic",language:"languages"}[o.type]??o.type;window.location.href=`/${f}/${o.id}`}),h.on("tick",()=>{g.attr("x1",t=>t.source.x??0).attr("y1",t=>t.source.y??0).attr("x2",t=>t.target.x??0).attr("y2",t=>t.target.y??0),n.attr("transform",t=>`translate(${t.x??0},${t.y??0})`)})})},[e,a,c]),l.jsxs("div",{style:{background:"rgba(10,10,15,0.6)",borderRadius:"8px",padding:"0.5rem",border:"1px solid rgba(255,255,255,0.06)"},children:[l.jsx("div",{style:{fontSize:"0.65rem",textTransform:"uppercase",letterSpacing:"0.1em",color:"rgba(255,255,255,0.3)",marginBottom:"4px",padding:"0 4px"},children:"Connections"}),l.jsx("svg",{ref:s,style:{display:"block"}})]})}export{w as default};
