import{j as n}from"./jsx-runtime.TBa3i5EZ.js";import{r}from"./index.CVf8TyFT.js";function f(){const[a,t]=r.useState(!1),c=r.useRef(null),i=r.useRef(!1);return r.useEffect(()=>{const e=s=>{(s.metaKey||s.ctrlKey)&&s.key==="k"&&(s.preventDefault(),t(!0)),s.key==="Escape"&&t(!1)};document.addEventListener("keydown",e);const l=document.getElementById("search-trigger"),o=()=>t(!0);return l?.addEventListener("click",o),()=>{document.removeEventListener("keydown",e),l?.removeEventListener("click",o)}},[]),r.useEffect(()=>{if(a&&!i.current&&c.current){const e=document.createElement("script");e.src="/pagefind/pagefind-ui.js",e.onload=()=>{window.PagefindUI&&c.current&&(new window.PagefindUI({element:"#pagefind-search",showImages:!1,excerptLength:15}),i.current=!0)},document.head.appendChild(e)}a&&setTimeout(()=>{c.current?.querySelector("input")?.focus()},100)},[a]),a?n.jsx("div",{className:"search-overlay",onClick:()=>t(!1),children:n.jsxs("div",{className:"search-modal",onClick:e=>e.stopPropagation(),children:[n.jsxs("div",{className:"search-header",children:[n.jsx("span",{className:"search-label",children:"Search Eldunary"}),n.jsx("button",{className:"search-close",onClick:()=>t(!1),children:"âœ•"})]}),n.jsx("div",{ref:c,children:n.jsx("div",{id:"pagefind-search"})})]})}):null}export{f as default};
